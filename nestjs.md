# NestJSë¡œ ë°°ìš°ëŠ” ë°±ì—”ë“œ í”„ë¡œê·¸ë˜ë°

# CHAP1. Hello NestJS
## 1.1 NestJSì˜ ì¥ì 
- CQRS, ì¸í„°ì…‰í„°, ë¯¸ë“¤ì›¨ì–´
---
from. sunman
- Express(main), Fastifyë¥¼ ë˜í•‘
- Expressì˜ ë‹¨ì 
  - ì¼ì •í•˜ì§€ ì•Šì€ ì†Œí”„íŠ¸ì›¨ì–´ í’ˆì§ˆ
  - ë¼ì´ë¸ŒëŸ¬ë¦¬ ê²€ìƒ‰ ë¶€ë‹´
- NestJSì˜ íŠ¹ì§•
  - ëª¨ë“ˆ/ì»´í¬ë„ŒíŠ¸ ê¸°ë°˜, IoC, DI, AOP, Typescript
---
```
- CQRS
CQRSëŠ” Command Query Responsibility Segregationì˜ ì•½ìë¡œ, ëª…ë ¹(Command)ê³¼ ì¡°íšŒ(Query)ì˜ ì±…ì„ì„ ë¶„ë¦¬í•˜ëŠ” ì•„í‚¤í…ì²˜ íŒ¨í„´ì…ë‹ˆë‹¤. ì•„ë˜ëŠ” CQRSì˜ ì£¼ìš” íŠ¹ì§•ê³¼ ì¥ì ì…ë‹ˆë‹¤:

ì±…ì„ ë¶„ë¦¬: ëª…ë ¹ê³¼ ì¡°íšŒë¥¼ ë¶„ë¦¬í•˜ì—¬ ê° ì—­í• ì— ë§ëŠ” ìµœì í™”ëœ ëª¨ë¸ì„ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

Command: ë°ì´í„° ë³€ê²½ ì‘ì—…ì„ ì²˜ë¦¬í•˜ë©°, ë³µì¡í•œ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì„ í¬í•¨í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

Query: ë°ì´í„° ì¡°íšŒ ì‘ì—…ì„ ì²˜ë¦¬í•˜ë©°, ì½ê¸° ì „ìš© ëª¨ë¸ë¡œ ë‹¨ìˆœí™”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

í™•ì¥ì„±: ì½ê¸°ì™€ ì“°ê¸° ì‘ì—…ì„ ë…ë¦½ì ìœ¼ë¡œ í™•ì¥í•  ìˆ˜ ìˆì–´ ì„±ëŠ¥ê³¼ í™•ì¥ì„±ì´ í–¥ìƒë©ë‹ˆë‹¤.

ìœ ì—°ì„±: ì„œë¡œ ë‹¤ë¥¸ ì €ì¥ì†Œë‚˜ ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆì–´, ìš”êµ¬ì‚¬í•­ì— ë”°ë¼ ìœ ì—°í•˜ê²Œ ì‹œìŠ¤í…œì„ êµ¬ì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ë³µì¡í•œ ë„ë©”ì¸ ë¡œì§ ì²˜ë¦¬: ë³µì¡í•œ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì„ ëª…ë ¹ ëª¨ë¸ì— ì§‘ì¤‘ì‹œì¼œ ê´€ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

CQRSëŠ” íŠ¹íˆ ë³µì¡í•œ ë„ë©”ì¸ ë¡œì§ì„ ì²˜ë¦¬í•˜ê±°ë‚˜ ì„±ëŠ¥ê³¼ í™•ì¥ì„±ì´ ì¤‘ìš”í•œ ì‹œìŠ¤í…œì—ì„œ ìœ ìš©í•˜ê²Œ ì‚¬ìš©ë©ë‹ˆë‹¤.
```

## 1.2 Expressê°€ ì¢‹ì„ê¹Œ, NestJSê°€ ì¢‹ì„ê¹Œ
```
- SSR
SSRì€ Server-Side Renderingì˜ ì•½ìë¡œ, ì„œë²„ì—ì„œ HTMLì„ ë Œë”ë§í•˜ì—¬ í´ë¼ì´ì–¸íŠ¸ì— ì œê³µí•˜ëŠ” ë°©ì‹ì…ë‹ˆë‹¤. ì•„ë˜ëŠ” SSRì˜ ì£¼ìš” íŠ¹ì§•ê³¼ ì¥ì ì…ë‹ˆë‹¤:

ì´ˆê¸° ë¡œë“œ ì‹œê°„ ë‹¨ì¶•: ì„œë²„ì—ì„œ ì™„ì „íˆ ë Œë”ë§ëœ HTMLì„ ì œê³µí•˜ê¸° ë•Œë¬¸ì— í´ë¼ì´ì–¸íŠ¸ ì¸¡ì—ì„œ JavaScriptë¥¼ ë‹¤ìš´ë¡œë“œí•˜ê³  ì‹¤í–‰í•  í•„ìš” ì—†ì´ ë¹ ë¥´ê²Œ í™”ë©´ì„ í‘œì‹œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

SEO: ê²€ìƒ‰ ì—”ì§„ í¬ë¡¤ëŸ¬ëŠ” JavaScriptë¥¼ ì‹¤í–‰í•˜ì§€ ì•Šê±°ë‚˜ ì‹¤í–‰ì´ ì œí•œì ì´ê¸° ë•Œë¬¸ì—, SSRì„ ì‚¬ìš©í•˜ë©´ ê²€ìƒ‰ ì—”ì§„ì— ìµœì í™”ëœ ì»¨í…ì¸ ë¥¼ ì œê³µí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ì¼ê´€ëœ ì‚¬ìš©ì ê²½í—˜: ì„œë²„ì—ì„œ ë Œë”ë§ëœ HTMLì„ ì œê³µí•˜ë¯€ë¡œ, ì‚¬ìš©ìê°€ ì½˜í…ì¸ ë¥¼ ë¹ ë¥´ê²Œ ë³¼ ìˆ˜ ìˆê³ , JavaScript ë²ˆë“¤ ë¡œë”©ê³¼ ì‹¤í–‰ì´ ì™„ë£Œëœ í›„ì— í´ë¼ì´ì–¸íŠ¸ ì¸¡ì—ì„œ ì¶”ê°€ì ì¸ ìƒí˜¸ì‘ìš©ì„ ì²˜ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ë³µì¡í•œ ì•±ì— ì í•©: ë°ì´í„°ê°€ ë§ì€ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ë‚˜ SEOê°€ ì¤‘ìš”í•œ ì• í”Œë¦¬ì¼€ì´ì…˜ì— ì í•©í•©ë‹ˆë‹¤.

SSRì„ êµ¬í˜„í•˜ëŠ” ëŒ€í‘œì ì¸ í”„ë ˆì„ì›Œí¬ë¡œëŠ” Next.js(React ê¸°ë°˜), Nuxt.js(Vue.js ê¸°ë°˜) ë“±ì´ ìˆìŠµë‹ˆë‹¤.
```

## 1.3 NestJS ì„¤ì¹˜
> npm i -g @nestjs/cli

> nest new project-name

> nset start --watch

## 1.4 ì±…ì—ì„œ ë§Œë“¤ ì• í”Œë¦¬ì¼€ì´ì…˜: ìœ ì € ì„œë¹„ìŠ¤
---
from. sunman
- í™˜ê²½ ë³€ìˆ˜ ì„¤ì •, ìš”ì²­ ìœ íš¨ì„± ê²€ì‚¬, ì¸ì¦
- ë¡œê¹…, í—¬ìŠ¤ ì²´í¬, CQRS, í´ë¦° ì•„í‚¤í…ì³, ë‹¨ìœ„ í…ŒìŠ¤íŠ¸
---

# CHAP2. ì›¹ ê°œë°œ ê¸°ì´ˆ ì§€ì‹

## 2.1 ì›¹ í”„ë ˆì„ì›Œí¬
---
from. sunman
- ìì£¼ ì‚¬ìš©ë˜ëŠ” ë™ì‘ì„ ì •í•´ì§„ ë°©ë²•ê³¼ ì¶”ìƒí™”ëœ ì¸í„°í˜ì´ìŠ¤ë¡œ ì œê³µ
---
```
SPAëŠ” Single Page Applicationì˜ ì•½ìë¡œ, ë‹¨ì¼ HTML í˜ì´ì§€ë¡œ êµ¬ì„±ëœ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì˜ë¯¸í•©ë‹ˆë‹¤. ì•„ë˜ëŠ” SPAì˜ ì£¼ìš” íŠ¹ì§•ê³¼ ì¥ì ì…ë‹ˆë‹¤:

ë¹ ë¥¸ ë¡œë“œ ì‹œê°„: ì²« í˜ì´ì§€ ë¡œë“œ í›„ ì¶”ê°€ì ì¸ í˜ì´ì§€ ìš”ì²­ ì—†ì´ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ë™ì‘í•˜ë¯€ë¡œ, í˜ì´ì§€ ì „í™˜ ì‹œ ë¹ ë¥¸ ì‘ë‹µ ì†ë„ë¥¼ ë³´ì…ë‹ˆë‹¤.

í–¥ìƒëœ ì‚¬ìš©ì ê²½í—˜: í˜ì´ì§€ ì „í™˜ ì‹œ ì „ì²´ í˜ì´ì§€ë¥¼ ë‹¤ì‹œ ë¡œë“œí•˜ì§€ ì•Šê³  í•„ìš”í•œ ë¶€ë¶„ë§Œ ê°±ì‹ í•˜ì—¬ ë¶€ë“œëŸ½ê³  ì¼ê´€ëœ ì‚¬ìš©ì ê²½í—˜ì„ ì œê³µí•©ë‹ˆë‹¤.

í´ë¼ì´ì–¸íŠ¸ ì¸¡ ë¼ìš°íŒ…: JavaScriptë¥¼ ì‚¬ìš©í•˜ì—¬ í´ë¼ì´ì–¸íŠ¸ ì¸¡ì—ì„œ ë¼ìš°íŒ…ì„ ì²˜ë¦¬í•˜ë¯€ë¡œ, ì„œë²„ ìš”ì²­ ì—†ì´ë„ URL ë³€ê²½ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.

ìƒíƒœ ê´€ë¦¬: í´ë¼ì´ì–¸íŠ¸ ì¸¡ì—ì„œ ì• í”Œë¦¬ì¼€ì´ì…˜ ìƒíƒœë¥¼ ê´€ë¦¬í•  ìˆ˜ ìˆìœ¼ë©°, Reduxë‚˜ Vuex ê°™ì€ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ í†µí•´ ì´ë¥¼ ìµœì í™”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

SEO ë¬¸ì œ: JavaScriptë¥¼ ì‚¬ìš©í•˜ì—¬ ì½˜í…ì¸ ë¥¼ ë Œë”ë§í•˜ë¯€ë¡œ ê²€ìƒ‰ ì—”ì§„ ìµœì í™”ì— ì–´ë ¤ì›€ì´ ìˆì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ SSR(Server-Side Rendering)ì„ í•¨ê»˜ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

SPAë¥¼ êµ¬í˜„í•˜ëŠ” ëŒ€í‘œì ì¸ í”„ë ˆì„ì›Œí¬ë¡œëŠ” React, Vue.js, Angular ë“±ì´ ìˆìŠµë‹ˆë‹¤.
```
## 2.2 Node.js
- ë‹¨ì¼ ìŠ¤ë ˆë“œì—ì„œ êµ¬ëµë˜ëŠ” ë…¼ë¸”ë¡œí‚¹ I/O ì´ë²¤íŠ¸ ê¸°ë°˜ ë¹„ë™ê¸° ë°©ì‹
- ìš°ë¦¬ëŠ” íŒŸ í•˜ë‚˜ì— 4ê°œì˜ ì¸ìŠ¤í„´ìŠ¤
---
from. sunman
- Nodejs 2009ë…„ ë¦´ë¦¬ì¦ˆ
- 2008ë…„ í¬ë¡¬ ë¸Œë¼ìš°ì € ìë°”ìŠ¤í¬ë¦½íŠ¸ ì—”ì§„ V8 ì´í›„ JS ì„±ëŠ¥ ê°œì„ 
---
## 2.3 ì´ë²¤íŠ¸ ë£¨í”„
- íƒ€ì´ë¨¸ > ëŒ€ê¸°ì½œë°± > ìœ íœ´,ì¤€ë¹„ > í´ > ì²´í¬ > ì¢…ë£Œ ì½œë°±
---
from. sunman
- ì´ë²¤íŠ¸ ë£¨í”„ëŠ” ì»¤ë„ì—ì„œ ê°€ëŠ¥í•œ ì‘ì—…ì€ ì»¤ë„ì— ì´ê´€
#### âœ… íƒ€ì´ë¨¸ ë‹¨ê³„

- `setTimeout`, `setInterval` ê³¼ ê°™ì€ í•¨ìˆ˜ë“¤ì„ íì— ë„£ê³  ì‹¤í–‰
- `now - registeredTime >= delta` ì¸ íƒ€ì´ë¨¸ë“¤ì´ íì— ë“¤ì–´ê°

#### âœ… ëŒ€ê¸° ì½œë°± ë‹¨ê³„

- pending íì— ë“¤ì–´ ìˆëŠ” ì½œë°±ë“¤ì€ í˜„ì¬ ëŒê³  ìˆëŠ” ë£¨í”„ ì´ì „ì˜ ì‘ì—…ì—ì„œ íì— ë“¤ì–´ì˜¨ ì½œë°±

#### âœ… ìœ íœ´, ì¤‘ë¹„ ë‹¨ê³„

- ìœ íœ´ ë‹¨ê³„ëŠ” ë§¤ í‹±ë§ˆë‹¤ ì‹¤í–‰
- ì¤€ë¹„ ë‹¨ê³„ëŠ” ë§¤ í´ë§ ì§ì „ì— ì‹¤í–‰

---

#### âœ… í´ ë‹¨ê³„ (ê°€ì¥ ì¤‘ìš¯ë‚˜ ë‹¨ê³„)

- watch í
- ìƒˆë¡œìš´ I/O ì´ë²¤íŠ¸ë¥´ ã„¹ê°€ì ¸ì™€ì„œ ê´€ë ¨ ì½œë°± ìˆ˜í–‰

#### âœ… ì²´í¬ ë‹¨ê³„

- setImmediateì˜ ì½œë°±ë§Œì„ ìœ„í•œ ë‹¨ê³„

#### âœ… ì¢…ë£Œ ì½œë°± ë‹¨ê³„

- `close`ë‚˜ `destroy` ì´ë²¤íŠ¸ íƒ€ì…ì˜ ì½œë°±ì´ ì²˜ë¦¬

### ğŸ [ìë°”ìŠ¤í¬ë¦½íŠ¸ ë¹„ë™ê¸°ì™€ ì´ë²¤íŠ¸ ë£¨í”„](https://inpa.tistory.com/entry/%F0%9F%94%84-%EC%9E%90%EB%B0%94%EC%8A%A4%ED%81%AC%EB%A6%BD%ED%8A%B8-%EC%9D%B4%EB%B2%A4%ED%8A%B8-%EB%A3%A8%ED%94%84-%EA%B5%AC%EC%A1%B0-%EB%8F%99%EC%9E%91-%EC%9B%90%EB%A6%AC)
---
## 2.4 íŒ¨í‚¤ì§€ ì˜ì¡´ì„± ê´€ë¦¬
- package.json 1.2.3-beta ([Major].[Minor].[Patch]-[label]
- package-lock.json : package.jsonì— ì„ ì–¸ëœ íŒ¨í‚¤ì§€ë“¤ì´ ì„¤ì¹˜ë  ë–¼ ì •í™•í•œ ë²„ì „ê³¼ ì„œë¡œê°„ì˜ ì˜ì¡´ì„±ì„ í‘œí˜„
## 2.5 íƒ€ì…ìŠ¤í¬ë¦½íŠ¸
---
from. sunman
- ì •ì  í”„ë¡œê·¸ë¨ ë¶„ì„
- í•¨ìˆ˜ íƒ€ì… (ì¼ê¸‰ í•¨ìˆ˜)
  - í•¨ìˆ˜ë¥¼ ë³€ìˆ˜ì— í• ë‹¹
  - ë‹¤ë¥¸ í•¨ìˆ˜ì˜ ì¸ìˆ˜ë¡œ í•¨ìˆ˜ ì „ë‹¬
  - í•¨ìˆ˜ì˜ ê²°ê³¼ë¡œ í•¨ìˆ˜ ë°˜í™˜
---
## 2.6 ë°ì»¤ë ˆì´í„°
- íš¡ë‹¨ ê´€ì‹¬ì‚¬ ì ìš©
- ìë°” ì–´ë…¸í…Œì´ì…˜ê³¼ ìœ ì‚¬
- ë°ì»¤ë ˆì´í„° í•©ì„±
  - 1) ê° ë°ì»¤ë ˆì´í„°ì˜ í‘œí˜„ì€ ìœ„ì—ì„œ ì•„ë˜ë¡œ í‰ê°€(evluate)
  - 2) ê·¸ëŸ° ë‹¤ìŒ ê²°ê³¼ëŠ” ì•„ë˜ì—ì„œ ìœ„ë¡œ í•¨ìˆ˜ë¡œ í˜¸ì¶œ(call)
- í´ë˜ìŠ¤ ë°ì»¤ë ˆì´í„°
- ë©”ì„œë“œ ë°ì»¤ë ˆì´í„°
  - 1) ì •ì  ë©¤ë²„ê°€ ì†í•œ í´ë˜ìŠ¤ì˜ ìƒì„±ì í•¨ìˆ˜ì´ê±°ë‚˜ ì¸ìŠ¤í„´ìŠ¤ ë©¤ë²„ì— ëŒ€í•œ í´ë˜ìŠ¤ì˜ í”„ë¡œí† íƒ€ì…
  - 2) ë©¤ë²„ì˜ ì´ë¦„
  - 3) ë©¤ë²„ì˜ ì†ì„± ì„¤ëª…ì. PropertyDescriptor íƒ€ì…ì„ ê°€ì§
- ì ‘ê·¼ì ë°ì»¤ë ˆì´í„°
- ì†ì„± ë°ì»¤ë ˆì´í„°
- ë©”ê²Œë³€ìˆ˜ ë°ì»¤ë ˆì´í„°

---
from. sunman
- íš¡ë‹¨ ê´€ì‹¬ì‚¬ë¥¼ ë¶„ë¦¬, ê´€ì  ì§€í–¥ í”„ë¡œê·¸ë˜ë°

---

#### âœ… ì¸ìˆ˜ ì—†ëŠ” ë°ì½”ë ˆì´í„° ê¸°ë³¸ ì˜ˆì‹œ

```ts
function deco(
  target: any,
  propertyKey: string,
  discriptor: PropertyDescriptor
) {
  console.log("run deco");
}

class TestClass {
  @deco
  test() {
    console.log("run test");
  }
}

const t = new TestClass();
t.test();
```

---

#### âœ… ì¸ìˆ˜ ìˆëŠ” ë°ì½”ë ˆì´í„° ê¸°ë³¸ ì˜ˆì‹œ

```ts
function deco(value: string) {
  console.log("run deco");
  return function (
    target: any,
    propertyKey: string,
    discriptor: PropertyDescriptor
  ) {
    console.log(value);
  };
}

class TestClass {
  @deco("HELLO")
  test() {
    console.log("run test");
  }
}

const t = new TestClass();
t.test();
```

---

#### âœ… ë°ì»¤ë ˆì´í„° í•©ì„±

1. ê°ë°ì»¤ë ˆì´í„°ëŠ” ìœ„ì—ì„œ ì•„ë˜ë¡œ í‰ê°€
2. ê²°ê³¼ëŠ” ì•„ë˜ì—ì„œ ìœ„ë¡œ í•¨ìˆ˜ë¥¼ í˜¸ì¶œ

---

#### âœ… ë°ì»¤ë ˆì´í„° í•©ì„± ì˜ˆì‹œ

```ts
function first(value: string) {
  // second
  console.log("first evaluated"); // second
  return function (
    target: any,
    propertyKey: string,
    discriptor: PropertyDescriptor
  ) {
    console.log("first called"); // second
  };
}

class TestClass {
  @first()
  @second()
  test() {
    console.log("run test");
  }
}

// first evaluated
// second evaluated
// second callsed
// first callsed
// run test
```

---

#### âœ… í´ë˜ìŠ¤ ë°ì»¤ë ˆì´í„°

```ts
function reportableClassDecorator<T extends {new (...args: any[]): {}}>(constructor:T){
    return class extends constructor [ // ìƒì„±ìë¥¼ ë¦¬í„´
        reportingURL = "http://www.naver.com"
    ]
}

@reportableClassDecorator
class BugReport {
    type="report"
    title: string;
    constructor(t:string){
        this.title = t;
    }
}

const bug = new BugReport("Needs dark mode")
console.log(bug)
// {type: 'report', title: "Needs dark mode", reportingURL: "http://www.naver.com"}
```

---

#### âœ… ë©”ì„œë“œ ë°ì»¤ë ˆì´í„°

- ê°–ëŠ” ì„¸ ê°œì˜ ì¸ìˆ˜

  1. ì •ì  ë©¤ë²„ê°€ ì†í•œ í´ë˜ìŠ¤ì˜ ìƒì„±ì í•¨ìˆ˜ì´ê±°ë‚˜ ì¸ìŠ¤í„´ìŠ¤ ë©¤ë²„ì— ëŒ€í•œ í´ë˜ìŠ¤ì˜ í”„ë¡œí† íƒ€ì…
  2. ë©¤ë²„ì˜ ì´ë¦„
  3. ë©¤ë²„ì˜ ì†ì„± ì„¤ëª…ì. PropertyDescriptor íƒ€ì…ì„ ê°€ì§

---

#### âœ… ë©”ì„œë“œ ë°ì»¤ë ˆì´í„° ì˜ˆì‹œ

```ts
function HandleError() {
  return function (
    target: any,
    propertyKey: string,
    descriptor: PropertyDescriptor
  ) {
    const method = descriptor.value;
    descriptor.value = function () {
      try {
        method();
      } catch (e) {
        // ì—ëŸ¬ í•¸ë“¤ë§ ë¡œì§ êµ¬í˜„
        console.log(e);
      }
    };
  };
}

class Greetor {
  @HandleError()
  hello() {
    throw new Error("Test");
  }
}

const t = new Greetor();
t.hello();
```

---

#### âœ… ì ‘ê·¼ì ë°ì»¤ë ˆì´í„°

```ts
function Enumerable(enumerable: boolean) {
  return function (target, propertyKey, descriptor) {
    descriptor.enumerable = enumerable;
  };
}

class Person {
  constructor(private name: string) {}

  @Enumerable(true)
  get getName() {
    return this.name;
  }

  @Enumerable(false)
  set setName(name: string) {
    this.name = name;
  }
}

const person = new Person("james");
for (let key in person) {
  console.log(`${key}: ${person[key]}`);
  // name, getName ì¶œë ¥ - setNameì€ ë¯¸ì¶œë ¥
}
```

---

#### âœ… ì†ì„± ë°ì»¤ë ˆì´í„°

- ê°–ëŠ” ë‘ ê°œì˜ ì¸ìˆ˜

  1. ì •ì  ë©¤ë²„ê°€ ì†í•œ í´ë˜ìŠ¤ì˜ ìƒì„±ì í•¨ìˆ˜ì´ê±°ë‚˜ ì¸ìŠ¤í„´ìŠ¤ ë©¤ë²„ì— ëŒ€í•œ í´ë˜ìŠ¤ì˜ í”„ë¡œí† íƒ€ì…
  2. ë©¤ë²„ì˜ ì´ë¦„

---

#### âœ… ì†ì„± ë°ì»¤ë ˆì´í„° ì˜ˆì‹œ

```ts
function format(formatString: boolean) {
  return function (target, propertyKey) {
    let value = target[propertyKey];

    function getter() {
      return `${formatString} ${value}`;
    }

    function setter(newVal: string) {
      value = newVal;
    }

    return {
      get: getter,
      set: setter,
      enumerable: true,
      configurable: true,
    };
  };
}

class Greeter {
  @format("Hello")
  greeting: string;
}

const t = new Greeter();
t.greeting = "World";
console.log(t.greeting()); // Hello World
```

---

#### âœ… ë§¤ê°œë³€ìˆ˜ ë°ì»¤ë ˆì´í„°

- ê°–ëŠ” ë‘ ê°œì˜ ì¸ìˆ˜

  1. ì •ì  ë©¤ë²„ê°€ ì†í•œ í´ë˜ìŠ¤ì˜ ìƒì„±ì í•¨ìˆ˜ì´ê±°ë‚˜ ì¸ìŠ¤í„´ìŠ¤ ë©¤ë²„ì— ëŒ€í•œ í´ë˜ìŠ¤ì˜ í”„ë¡œí† íƒ€ì…
  2. ë©¤ë²„ì˜ ì´ë¦„
  3. ë§¤ê°œë³€ìˆ˜ê°€ í•¨ìˆ˜ì—ì„œ ëª‡ ë²ˆì§¸ ìœ„ì¹˜ì— ì„ ì–¸ë˜ì—ˆëŠ”ì§€ë¥¼ ë‚˜íƒ€ë‚´ëŠ” ì¸ë±ìŠ¤

---

#### âœ… ë§¤ê°œë³€ìˆ˜ ë°ì»¤ë ˆì´í„° ì˜ˆì‹œ

```ts
import {BadRequestException} from "@nestjs/common"

function MinLength(min: number){
    return funtion (target, propertyKey, parameterIndex){
        target.validators = {
            minLength: function (args: string[]){
                return args[parameterIndex].length >= min
            }
        }
    }
}

function Validate(target, propertyKey, descriptor){
    const method = descriptor.value

    descriptor.value = function(...args){
        Object.keys(target.validators).forEach(key => {
            if (!target.validators[key](args)){
                throw new BadRequestException()
            }
        })
        method.apply(this.args)
    }
}

class User {
    private name: string;

    @Validate
    setName(@MinLength(3) name: string){
        this.name = name
    }
}

const t = new User();
t.setName('123456')
console.log('---')
t.setName('12')
```
---
ì•Œì•„ë³´ê¸°
ë•íƒ€ì´í•‘
ìë°”ìŠ¤í¬ë¦½íŠ¸ ì›ì‹œ/ì°¸ì¡°

# CHAP3. ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ê´€ë¬¸: ì¸í„°í˜ì´ìŠ¤
## 3.1 ì»¨íŠ¸ë¡¤ëŸ¬
- ì»¨íŠ¸ë¡¤ëŸ¬ : ë“¤ì–´ì˜¤ëŠ” ìš”ì²­ì„ ë°›ê³  ì²˜ë¦¬ëœ ê²°ê³¼ë¥¼ ì‘ë‹µìœ¼ë¡œ ëŒë ¤ì£¼ëŠ” ì¸í„°í˜ì´ìŠ¤ ì—­í• 
  - ì—”ë“œí¬ì¸íŠ¸ ë¼ìš°íŒ… ë§¤ì»¤ë‹ˆì¦ì„ í†µí•´ ê° ì»¨íŠ¸ë¡¤ëŸ¬ê°€ ë°›ì„ ìˆ˜ ìˆëŠ” ìš”ì²­ì„ ë¶„ë¥˜
```
$nest g resource [name]
```
### 3.1.1 ë¼ìš°íŒ…
- @Controller ë°ì»¤ë ˆì´í„° ì‚¬ìš©
### 3.1.2 ì™€ì¼ë“œì¹´ë“œ ì‚¬ìš©
- @Get('He*lo') ê°€ëŠ¥
### 3.1.3 ìš”ì²­ ê°ì²´
- @Req ë°ì»¤ë ˆì´í„° ì‚¬ìš© : request ë‚´ìš©ì„ í™•ì¸í• ìˆ˜ ìˆìŒ
### 3.1.4 ì‘ë‹µ
- @Res
- @HttpCode
### 3.1.5 í—¤ë”
- @Header
- ? ë™ì ìœ¼ë¡œ í•˜ëŠ” ë°©ë²•ì€ ? @Res ê°ì²´
### 3.1.6 ë¦¬ë‹¤ì´ë ‰ì…˜
- @Redirect
### 3.1.7 ë¼ìš°íŠ¸ ë§¤ê°œë³€ìˆ˜
- @Param == PathVariable
### 3.1.8 í•˜ìœ„ ë„ë©”ì¸ ë¼ìš°íŒ…
- @Controller({host: 'flight-reservation.naver.com'})
### 3.1.9 í˜ì´ë¡œë“œ ë‹¤ë£¨ê¸°
- @Body
---
@Query Vs @Param ì°¨ì´ì  í™•ì¸
---
## 3.2 ìœ ì € ì„œë¹„ìŠ¤ì˜ ì¸í„°í˜ì´ìŠ¤

# CHAP4. í•µì‹¬ ë„ë©”ì¸ ë¡œì§ì„ í¬í•¨í•˜ëŠ” í”„ë¡œë°”ì´ë”
## 4.1 í”„ë¡œë°”ì´ë”
- ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì„ ìˆ˜í–‰í•˜ëŠ” ì—­í• 
- í”„ë¡œë°”ì´ë”ëŠ” service, repository, factory, helper ë“± ì—¬ëŸ¬ê°€ì§€ í˜•íƒœë¡œ êµ¬í˜„
- Nestì—ì„œ ì œê³µí•˜ëŠ” í”„ë¡œë°”ë”ì˜ í•µì‹¬ì€ ì˜ì¡´ì„± ì£¼ì…(DI)
- @Injectable() ë°ì½”ë ˆì´í„°ë¡œ ë‹¤ë¥¸ Nest ì»´í¬ë„ŒíŠ¸ì—ì„œ ì£¼ì…í•  ìˆ˜ ìˆëŠ” í”„ë¡œë°”ì´ë”ê°€ ë¨
- ë³„ë„ì˜ ìŠ¤ì½”í”„ë¥¼ ì§€ì •í•´ ì£¼ì§€ ì•Šìœ¼ë©´ ì‹±ê¸€í„´ ì¸ìŠ¤í„´ìŠ¤ê°€ ìƒì„±ë¨
  - ë³„ë„ì˜ ìŠ¤ì½”í”„?
 
## 4.2 í”„ë¡œë°”ì´ë” ë“±ë¡ê³¼ ì‚¬ìš©
### 4.2.1 í”„ë¡œë°”ì´ë” ë“±ë¡
```
@Module({
  imports: [
    MongooseModule.forFeature(models, MongoConnections.SERVICE),
    ElasticSearchUtilModule.forFeature([IndexNames.DEMO]),
  ],
  controllers: [],
  exports: [DemoService],
  providers: [DemoResolver, DemoService, DemoMongodbRepository, DemoElasticsearchRepository, DemoRedisRepository],
})
export class DemoModule {}
```
### 4.2.2 ì†ì„± ê¸°ë°˜ ì£¼ì…
![IMG_2872](https://github.com/user-attachments/assets/274a12bf-bd07-4374-bcc3-6990bae37689)
```
@Inject(ServiceA) private readonly serviceA: ServiceA;
```
- @Injectable() ë°ì½”ë ˆì´í„°ëŠ” NestJSì—ì„œ ì œê³µí•˜ëŠ” ë°ì½”ë ˆì´í„°ë¡œ, í´ë˜ìŠ¤ë¥¼ NestJSì˜ ì˜ì¡´ì„± ì£¼ì…(DI) ì‹œìŠ¤í…œì— ë“±ë¡í•©ë‹ˆë‹¤. ì´ ë°ì½”ë ˆì´í„°ëŠ” ì¼ë°˜ì ìœ¼ë¡œ ì•„ë¬´ëŸ° ì¸ì ì—†ì´ ì‚¬ìš©ë©ë‹ˆë‹¤.
- ê·¸ëŸ¬ë‚˜, @Injectable() ë°ì½”ë ˆì´í„°ëŠ” ì„ íƒì ìœ¼ë¡œ Scope ì¸ìë¥¼ ë°›ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ëŠ” ì„œë¹„ìŠ¤ì˜ ë²”ìœ„(scope)ë¥¼ ì§€ì •í•˜ëŠ”ë° ì‚¬ìš©ë˜ë©°, DEFAULT, REQUEST, TRANSIENT ì¤‘ í•˜ë‚˜ì˜ ê°’ì„ ê°€ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
```ts
import { Injectable, Scope } from "@nestjs/common";

@Injectable({ scope: Scope.REQUEST })
export class ServiceA {
  getHello(): string {
    return 'Hello A'
  }
}
```
- ìœ„ì˜ ì½”ë“œì—ì„œ ServiceAëŠ” ìš”ì²­ ë²”ìœ„(request scope)ë¥¼ ê°€ì§„ ì„œë¹„ìŠ¤ë¡œ ë“±ë¡ë©ë‹ˆë‹¤. ì´ëŠ” ê°ê°ì˜ ìš”ì²­ì— ëŒ€í•´ ìƒˆë¡œìš´ ì¸ìŠ¤í„´ìŠ¤ê°€ ìƒì„±ë˜ëŠ” ê²ƒì„ ì˜ë¯¸í•©ë‹ˆë‹¤.

## 4.3 ìœ ì € ì„œë¹„ìŠ¤ì— íšŒì› ê°€ì… ë¡œì§€ êµ¬í˜„í•˜ê¸°
### 4.3.1 UserService í”„ë¡œë°”ì´ë” ìƒì„±
```
import { Module } from '@nestjs/common';
import { AppController } from './app.controller';
import { AppService } from './app.service';
import { UsersService } from './users/users.service';

@Module({
  imports: [],
  controllers: [AppController],
  providers: [AppService, UsersService],
})
export class AppModule {}
```
### 4.3.2 íšŒì›ê°€ì…
- Controller
```
@Controller('users')
export class UsersController {
  constructor(private readonly usersService: UsersService) {}

  async createUser(@Body() dto: CreateUserDto): Promise<void> {
    const {name, email, password} = dto;
    await this.usersService.createUser(name, email, password);
  }
}
```
1. ê°€ì…ìœ ì € ì¡´ì¬ ê²€ì‚¬
2. ìœ ì € DB ì €ì¥ / ìœ íš¨ê¸°ê°„ ìˆëŠ” í† í° ìƒì„±
3. íšŒì›ê°€ì… ì´ë©”ì¼ ë°œì†¡

### 4.3.3 íšŒì› ê°€ì… ì´ë©”ì¼ ë°œì†¡
- EmailService í”„ë¡œë°”ì´ë” ìƒì„±
- UserService ì— EmailService ì£¼ì…

### 4.3.4 ì´ë©”ì¼ ì¸ì¦
- UserService ì— verifyEmail ë©”ì†Œë“œ ìƒì„±

### 4.3.5 ë¡œê·¸ì¸
- UserSerice ì— login ë©”ì†Œë“œ ìƒì„±
### 4.3.6 ìœ ì € ì •ë³´ ì¡°íšŒ
- UserSerice ì— getUserInfo ë©”ì†Œë“œ ìƒì„±

## ì‰¬ì–´ê°€ëŠ” í˜ì´ì§€ - ìŠ¤ì½”í”„
ì°¸ê³  - https://velog.io/@hing/NestJS-%EA%B3%B5%EC%8B%9D-%EB%AC%B8%EC%84%9C-Injection-scopes
- DEFAULT : ì‹±ê¸€í„´ ì¸ìŠ¤í„´ìŠ¤ê°€ ì „ì²´ ì–´í”Œë¦¬ì¼€ì´ì…˜
- REQUEST : ìš”ì²­ë§ˆë‹¤ ì¸ìŠ¤í„´ìŠ¤ ìƒì„±
- TRANSIENT : ì¸ìŠ¤í„´ìŠ¤ê°€ ê³µìœ ë˜ì§€ ì•ŠìŒ
  - ê°€ëŠ¥í•˜ë©´ DEFAULT ê¶Œì¥ - ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìºì‹œí• ìˆ˜ ìˆê³  ì´ˆê¸°í™”ê°€ í•œë²ˆ ë°œìƒí•˜ë¯€ë¡œ ë©”ëª¨ë¦¬ì™€ ë™ì‘ ì„±ëŠ¥ì„ í–¥ìƒ
--- 
gpt
- ì‹±ê¸€í†¤ ìŠ¤ì½”í”„ (ê¸°ë³¸ ê°’)
  - ê¸°ë³¸ì ì¸ ì‚¬ìš© ì‹œë‚˜ë¦¬ì˜¤: ëŒ€ë¶€ë¶„ì˜ ê²½ìš°, ì„œë¹„ìŠ¤ì™€ ì»¨íŠ¸ë¡¤ëŸ¬ëŠ” ìƒíƒœë¥¼ ìœ ì§€í•˜ì§€ ì•Šê±°ë‚˜, ëª¨ë“  ìš”ì²­ì— ëŒ€í•´ ë™ì¼í•œ ìƒíƒœë¥¼ ì‚¬ìš©í•´ì•¼ í•  ë•Œ ì í•©í•©ë‹ˆë‹¤.
  - ì¥ì : ë©”ëª¨ë¦¬ ì‚¬ìš©ì´ ì ê³ , ì„±ëŠ¥ì´ ì¢‹ìŠµë‹ˆë‹¤.
- ìš”ì²­ ìŠ¤ì½”í”„ (Request Scope)
  - í•„ìš”ì„±: ê° ìš”ì²­ë§ˆë‹¤ ìƒˆë¡œìš´ ì¸ìŠ¤í„´ìŠ¤ê°€ ìƒì„±ë˜ì–´ì•¼ í•  ë•Œ ì‚¬ìš©í•©ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, ìš”ì²­ë§ˆë‹¤ ë‹¤ë¥¸ ì‚¬ìš©ì ì»¨í…ìŠ¤íŠ¸ê°€ í•„ìš”í•˜ê±°ë‚˜, ìš”ì²­ì˜ ìƒíƒœë¥¼ ë…ë¦½ì ìœ¼ë¡œ ìœ ì§€í•´ì•¼ í•˜ëŠ” ê²½ìš°ì…ë‹ˆë‹¤.
  - ì˜ˆì‹œ: ì¸ì¦ ë° ê¶Œí•œ ê²€ì‚¬, ìš”ì²­ì— ë”°ë¼ ë‹¤ë¥¸ ë°ì´í„°ë¥¼ ì²˜ë¦¬í•  ë•Œ.
  - ë‹¨ì : ê° ìš”ì²­ë§ˆë‹¤ ìƒˆë¡œìš´ ì¸ìŠ¤í„´ìŠ¤ê°€ ìƒì„±ë˜ë¯€ë¡œ ë©”ëª¨ë¦¬ ì‚¬ìš©ì´ ì¦ê°€í•˜ê³ , ì„±ëŠ¥ì´ ë‹¤ì†Œ ì €í•˜ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- íŠ¸ëœì§€ì–¸íŠ¸ ìŠ¤ì½”í”„ (Transient Scope)
  - í•„ìš”ì„±: ë™ì¼í•œ ìš”ì²­ ë‚´ì—ì„œë„ ì—¬ëŸ¬ ì¸ìŠ¤í„´ìŠ¤ê°€ í•„ìš”í•  ë•Œ ì‚¬ìš©í•©ë‹ˆë‹¤. íŠ¸ëœì§€ì–¸íŠ¸ ìŠ¤ì½”í”„ë¥¼ ê°€ì§„ í”„ë¡œë°”ì´ë”ëŠ” ì£¼ì…ë  ë•Œë§ˆë‹¤ ìƒˆë¡œìš´ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.
  - ì˜ˆì‹œ: íŠ¹ì • ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì´ íŠ¹ì • ì˜ì¡´ì„±ì„ ì—¬ëŸ¬ ë²ˆ ì¸ìŠ¤í„´ìŠ¤í™”í•´ì•¼ í•˜ëŠ” ê²½ìš°.
  - ë‹¨ì : ë©”ëª¨ë¦¬ ì‚¬ìš©ê³¼ ì„±ëŠ¥ì— ì˜í–¥ì„ ë¯¸ì¹  ìˆ˜ ìˆìœ¼ë¯€ë¡œ, í•„ìš”í•œ ê²½ìš°ì—ë§Œ ì‹ ì¤‘í•˜ê²Œ ì‚¬ìš©í•´ì•¼ í•©ë‹ˆë‹¤.
---

### í”„ë¡œë°”ì´ë”ì— ìŠ¤ì½”í”„ ì ìš©í•˜ê¸°
```
@Injectable({ scope: Scope.REQUEST })
```
### ì»¨íŠ¸ë¡¤ëŸ¬ì— ìŠ¤ì½”í”„ ì ìš©í•˜ê¸°
```
@Controller({
  path: 'cats',
  scope: Scope.REQUEST
})
```

### ìŠ¤ì½”í”„ ê³„ì¸µ
- ì—°ê´€ëœ ì»´í¬ë„ŒíŠ¸ë“¤ì´ ë‹¤ë¥¸ ìŠ¤ì½”í”„ë¥¼ ê°€ì§€ê²Œ ëœë‹¤ë©´?
  - 1.DEFAULT -> 2.REQUEST -> 3.DEFALUT : 1ë²ˆì´ 2ë²ˆì— ì˜ì¡´ì ì´ê¸° ë•Œë¬¸ì— REQUEST, 3ë²ˆì€ 2ë²ˆì— ì˜ì¡´í•˜ì§€ ì•Šê¸° ë•Œë¬¸ì— DEFALUT, ê·¸ëŸ¼ 2ë²ˆì€ 3ë²ˆì— ì˜ì¡´í•˜ëŠ”ë°? ë²”ìœ„ê°€ ì‘ì•„ì„œ?
 
## ì»¤ìŠ¤í…€ í”„ë¡œë°”ì´ë”
- ì‚¬ìš© í•„ìš”
  1. Nest í”„ë ˆì„ì›Œí¬ ë§ê³  ì§ì ‘ ìƒì„±í•˜ê³  ì‹¶ì€ê²½ìš° ?
  2. ì—¬ëŸ¬í´ë˜ìŠ¤ì˜ ì˜ì¡´ê´€ê³„ì— ìˆì„ë•Œ ì´ë¯¸ ì¡´ì¬í•˜ëŠ” í´ë˜ìŠ¤ë¥¼ ì¬ì‚¬ìš©í•˜ê³ ì í• ë•Œ ?
  3. í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•´ ëª¨ì˜ ë²„ì „ìœ¼ë¡œ í”„ë¡œë°”ì´ë”ë¥¼ ì¬ì •ì˜í•˜ëŠ” ê²½ìš°
### ë°¸ë¥˜ í”„ë¡œë°”ì´ë”
- provide, useVlaue ì†ì„±ì„ ê°€ì§
```
providers: [{
  provide: CatService,
  useValue: mockCatsService
}]
```
### í´ë˜ìŠ¤ í”„ë¡œë°”ì´ë”
- ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë™ì ìœ¼ë¡œ êµ¬ì„±
- provide, useClass ì‚¬ìš©

### íŒ©í„°ë¦¬ í”„ë¡œë°”ì´ë”
- ì—­ì‹œ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë™ì ìœ¼ë¡œ êµ¬ì„±
- provide, useFactory

### í”„ë¡œë°”ì´ë” ë‚´ë³´ë‚´ê¸°
```
providers: [connectionFactory],
exports: [connectionFactory] || export ['CONNECTION']
```

# CHAP5. SW ë³µì¡ë„ë¥¼ ë‚®ì¶”ê¸° ìœ„í•œ ëª¨ë“ˆ ì„¤ê³„

## 5.1 ëª¨ë“ˆ:ì‘ì§‘ì„± ìˆëŠ” ì„¤ê³„
- ëª¨ë“ˆì„ ë‚˜ëˆ„ëŠ” ì´ìœ ëŠ” ì±…ì„ì„ ë‚˜ëˆ„ê³  ì‘ì§‘ë„ë¥¼ ë†’ì´ê¸° ìœ„í•¨
- @Module ë°ì»¤ë ˆì´í„° ì‚¬ìš©
  - import: í•´ë‹¹ ëª¨ë“ˆì—ì„œ ì‚¬ìš©í•˜ê¸° ìœ„í•´ ë‹¤ë¥¸ ëª¨ë“ˆì„ ê°€ì ¸ì˜´
  - controller / providers: ì»¨íŠ¸ë¡¤ë¡œì™€ í”„ë¡œë°”ì´ë”ë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ ê°ì²´ë¥¼ ìƒì„±í•˜ê³  ì£¼ì…
  - export: ë‹¤ë¥¸ ëª¨ë“ˆì—ì„œ ì‚¬ìš©í• ìˆ˜ ìˆë„ë¡ ë‚´ë³´ëƒ„
### 5.1.1 ëª¨ë“ˆ ë‹¤ì‹œ ë‚´ë³´ë‚´ê¸°
### 5.1.2 ì „ì—­ëª¨ë“ˆ
- @Global ë°ì»¤ë ˆì´í„° ì‚¬ìš©
  - ë‚¨ë°œí•˜ë©´ ì‘ì§‘ë„ê°€ ë–¨ì–´ì§

## 5.2 ìœ ì €ì„œë¹„ìŠ¤ì˜ ëª¨ë“ˆ ë¶„ë¦¬
### 5.2.1 UsersModule ë¶„ë¦¬
### 5.2.2 EmailModule ë¶„ë¦¬

# CHAP6. ë™ì  ëª¨ë“ˆì„ í™œìš©í•œ í™˜ê²½ ë³€ìˆ˜ êµ¬ì„±
## 6.1 ë™ì ëª¨ë“ˆ
## 6.2 dotenvë¥¼ ì´ìš©í•œ Config ì„¤ì •
- dotenv ë¼ì´ë¸ŒëŸ¬ë¦¬ : ê° í™˜ê²½ë³€ìˆ˜ë¥¼ .env ì— ì €ì¥
## 6.3 Nest ì—ì„œ ì œê³µí•˜ëŠ” Config íŒ¨í‚¤ì§€
- @nestjs/config íŒ¨í‚¤ì§€ ì œê³µ
## 6.4 ìœ ì € ì„œë¹„ìŠ¤ì— í™˜ê²½ ë³€ìˆ˜ êµ¬ì„±í•˜ê¸°
### 6.4.1 ì»¤ìŠ¤í…€ Config íŒŒì¼ ì‘ì„±
### 6.4.2 ë™ì  ConfigModule ë“±ë¡

# CHAP7. íŒŒì´í”„ì™€ ìœ íš¨ì„± ê²€ì‚¬
## 7.1 íŒŒì´í”„
- íŒŒì´í”„ : ìš”ì²­ì´ ë¼ìš°í„° í•¸ë“¤ëŸ¬ë¡œ ì „ë‹¬ë˜ê¸° ì „ì— ìš”ì²­ ê°ì²´ë¥¼ ë³€í™˜í•  ìˆ˜ ìˆëŠ” ê¸°íšŒë¥¼ ì œê³µ
  - ë³€í™˜
  - ìœ íš¨ì„± ê²€ì‚¬
- ë‚´ì¥ íŒŒì´í”„

## 7.2 íŒŒì´í”„ì˜ ë‚´ë¶€ êµ¬í˜„ ì´í•´í•˜ê¸°
- ì»¤ìŠ¤í…€íŒŒì´í”„ - PipeTransfrom implement
- transfrom 
  - value: í˜„ì¬ íŒŒì´í”„ì— ì „ë‹¬ëœ ì¸ìˆ˜
  - metadata : í˜„ì¬ íŒŒì´í”„ì— ì „ë‹¬ëœ ì¸ìˆ˜ì˜ ë©”íƒ€ë°ì´í„°
    - type
    - metatype
    - data

## 7.3 ìœ íš¨ì„± ê²€ì‚¬ íŒŒì´í”„ ë§Œë“¤ê¸°
- class-validator
- class-transformer

## 7.4 ìœ ì € ì„œë¹„ìŠ¤ì— ìœ íš¨ì„± ê²€ì‚¬ ì ìš©í•˜ê¸°
### 7.4.1 ìœ ì € ìƒì„± ë³¸ë¬¸ ìœ íš¨ì„± ê²€ì‚¬
### 7.4.2 class-transfomer í™œìš©
- @Transform
### 7.4.3 ì»¤ìŠ¤í…€ ìœ íš¨ì„± ê²€ì‚¬ê¸° ì‘ì„±

# CHAP8. ì˜ì†í™”: ë°ì´í„° ê¸°ë¡í•˜ê¸° ë‹¤ë£¨ê¸°
## 8.1 MySQL ë°ì´í„°ë² ì´ìŠ¤ ì„¤ì •
- ORM
## 8.2 TypeORMìœ¼ë¡œ ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²°
## 8.3 íšŒì› ê°€ì…ì„ ìš”ì²­í•œ ìœ ì €ì˜ ì •ë³´ ì €ì¥í•˜ê¸°
- ì—”í‹°í‹° ì‘ì„±ë°©ë²•
## 8.4 íŠ¸ëœì­ì…˜ ì ìš©
### 8.4.1 QueryRunnerë¥¼ ì‚¬ìš©í•˜ëŠ” ë°©ë²•
### 8.4.2 transaction í•¨ìˆ˜ë¥¼ ì§ì ‘ ì´ìš©í•˜ëŠ” ë°©ë²•
## 8.5 ë§ˆì´ê·¸ë ˆì´ì…˜

# CHAP9. ìš”ì²­ ì²˜ë¦¬ ì „ì— ë¶€ê°€ ê¸°ëŠ¥ì„ ìˆ˜í–‰í•˜ê¸° ìœ„í•œ ë¯¸ë“¤ì›¨ì–´
## 9.1 ë¯¸ë“¤ì›¨ì–´
- ë¼ìš°íŠ¸ í•¸ë“¤ëŸ¬ê°€ í´ë¼ì´ì–¸íŠ¸ ìš”ì²­ì„ ì²˜ë¦¬í•˜ê¸° ì „ì— ìˆ˜í–‰ë˜ëŠ” ì»´í¬ë„ŒíŠ¸
- ì—¬ëŸ¬ê°œ ë¯¸ë“¤ì›¨ì–´ ì‚¬ìš©ì‹œ next()ë¡œ ë‹¤ìŒ ë¯¸ë“¤ì›¨ì–´ë¥¼ í˜¸ì¶œ
- ì¿ í‚¤íŒŒì‹±, ì„¸ì…˜ê´€ë¦¬, ì¸ì¦/ì¸ê°€, ë³¸ë¬¸íŒŒì‹±ë“±ì„ ìˆ˜í–‰
## 9.2 Logger ë¯¸ë“¤ì›¨ì–´
- NestMiddleware ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•˜ê³  module consumer ì¶”ê°€
## 9.3 MiddlewareConsumer
- module consumer apply ì— ì—¬ëŸ¬ê°œ ì„ ì–¸í• ìˆ˜ ìˆìŒ
- forRoutes ëŠ” string, ì»¨íŠ¸ë¡¤ëŸ¬ í´ë˜ìŠ¤ëª…, RouteInfo ë¥¼ ë„£ì„ìˆ˜ ìˆìŒ, ë³´í†µì€ ì»¨íŠ¸ë¡¤ëŸ¬ í´ë˜ìŠ¤
- exclude ë¡œ ì œì™¸ ê°€ëŠ¥
## 9.4 ì „ì—­ìœ¼ë¡œ ì ìš©í•˜ê¸°
- í•¨ìˆ˜ë¡œ ë§Œë“¤ì–´ì„œ main.ts ì— ì ìš©í•˜ë©´ ì „ì—­ìœ¼ë¡œ ì‚¬ìš©ê°€ëŠ¥
- ë‹¨ì ì€ í•¨ìˆ˜ë¡œ ë§Œë“¤ë©´ DI ì»¨í…Œì´ë„ˆë¥¼ ì‚¬ìš©í• ìˆ˜ ì—†ìŒ

# CHAP10. ê¶Œí•œ í™•ì¸ì„ ìœ„í•œ ê°€ë“œ: JWT ì¸ì¦/ì¸ê°€
## 10.1 ê°€ë“œ
- ì¸ê°€ëŠ” ê°€ë“œë¡œ êµ¬í˜„í• ìˆ˜ ìˆëŠ” ì¢‹ì€ì˜ˆ
- ë¯¸ë“¤ì›¨ì–´ëŠ” ì‹¤í–‰ì½˜í…ìŠ¤íŠ¸ì— ì ‘ê·¼ ë¶ˆê°€

## 10.2 ê°€ë“œë¥¼ ì´ìš©í•œ ì¸ê°€
- ê°€ë“œëŠ” catActivate ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„
### 10.2.1 ì‹¤í–‰ì½˜í…ìŠ¤íŠ¸
- ExcutionContextë¥¼ ì¸ìˆ˜ë¡œ ë°›ê³  ì´ëŠ” ArgumentsHost ìƒì†ë°›ëŠ”ë° ìš”ì²­ê³¼ ì‘ë‹µì— ëŒ€í•œ ì •ë³´ë¥¼ ê°€ì§€ê³  ìˆìŒ.
### 10.2.2 ê°€ë“œ ì ìš©
- ì»¨íŠ¸ë¡¤ëŸ¬, ë©”ì„œë“œëŠ” @UserGuards ì‚¬ìš©
- ì „ì—­ìœ¼ë¡œ ì‚¬ìš©ì‹œ main.ts ì— app.useGlobalGuards ì‚¬ìš©
- ë‹¤ë¥¸ í”„ë¡œë°”ì´ë”ì— ì£¼ì…í•´ì„œ ì‚¬ìš©í•˜ë ¤ë©´ ì»¤ìŠ¤í…€ í”„ë¡œë°”ì´ë” (appModule ì— ì„ ì–¸)

## 10.3 ì¸ì¦
- ì£¼ë¡œ ì„¸ì…˜, í† í° ë°©ì‹
- í† í°ë°©ì‹ì—ì„œë„ JWTê°€ ê±°ì˜ í‘œì¤€
### 10.3.1 ì„¸ì…˜ ê¸°ë°˜ ì¸ì¦
- ì„œë²„ DB ì— ì €ì¥
- í´ë¼ì´ì–´íŠ¸ëŠ” ì„¸ì…˜ì €ì¥ì†Œ, ë¡œì»¬ì €ì¥ì†Œ, ì¿ í‚¤ ì‚¬ìš©
### 10.3.2 í† í° ê¸°ë°˜ ì¸ì¦
- ì„œë²„ì—ì„œ í† í°ì„ ìƒì„±í•˜ê³  ì €ì¥ì†Œì— ë”°ë¡œ ì €ì¥í•˜ì§€ ì•ŠìŒ
- ê·¸ì´í›„ì—ëŠ” í† í° ê²€ì¦ë§Œ ìˆ˜í–‰
## 10.4 JWT
- í—¤ë”, í˜ì´ë¡œë“œ, ì‹œê·¸ë‹ˆì²˜ 3ê°€ì§€ ìš”ì†Œ
### 10.4.1 í—¤ë”
- type : ë¯¸ë””ì–´ íƒ€ì…
- alg : ì•”ì˜¤í™” ì•Œê³ ë¦¬ì¦˜
### 10.4.2 í˜ì´ë¡œë“œ
### 10.4.3 ì‹œê·¸ë‹ˆì²˜
## 10.5 ìœ ì € ì„œë¹„ìŠ¤ì˜ ì´ë©”ì¼ ì¸ì¦ ì²˜ë¦¬ì™€ JWT ë°œê¸‰
### 10.5.1 íšŒì›Œ ê°€ì… ì´ë©”ì¼ ì¸ì¦
### 10.5.2 ë¡œê·¸ì¸
### 10.5.3 JWT ì¸ì¦: íšŒì› ì •ë³´ ì¡°íšŒ
### 10.5.4 ê°€ë“œë¥¼ ì´ìš©í•œ ì¸ê°€ ì²˜ë¦¬

## [ì‰¬ì–´ê°€ëŠ” í˜ì´ì§€] ìŠ¬ë¼ì´ë”© ì„¸ì…˜ê³¼ ë¦¬í”„ë ˆì‹œ í† í°
- í† í°ì„ íƒˆì·¨í• ê²½ìš° ë¬´íš¨í™” ëª»í•˜ëŠ” ì·¨ì•½ì 
- ê·¸ë˜ì„œ í† í°ì˜ ìœ íš¨ê¸°ê°„ì„ ì§§ê²Œ
- ì‚¬ìš©ì´ìœ  : íƒˆì·¨ë¥¼ ë°©ì§€í•˜ê³ ì í† í° ìœ íš¨ê¸°ê°„ì„ ì§§ê²Œí•˜ë©´ í• ë•Œë§ˆë‹¤ ë¡œê·¸ì¸ í•˜ì—¬ ë¶ˆí¸í•¨ 
- ìŠ¬ë¼ì´ë”© ì„¸ì…˜ì€ í˜„ì¬ í† í°ì„ ìƒˆë¡œìš´ í† í°ìœ¼ë¡œ ê°±ì‹ í•´ì¤Œ
- ì‚¬ìš©ìê°€ ë¡œê·¸ì¸í•˜ëŠ” ê³¼ì •ì„ ëŒ€ì‹ í•´ì¤„ ë¦¬í”„ë ˆì‹œ í† í°, ë§Œë£Œë  ê²½ìš° ì´ê²ƒì„ ì‚¬ìš©í•˜ì—¬ ì¬ë°œê¸‰
- ì•¡ì„¸ìŠ¤í† í°, ë¦¬í”„ë ˆì‹œí† í° ë‘ê°œë¥¼ ë°œê¸‰
- ê²°êµ­ì—” íƒˆì·¨ëœê±¸ ì•Œì•˜ì„ë•Œ ë¦¬í”„ë ˆì‰¬ í† í°ì„ ì‚­ì¬í–ì—¬ ë¬´íš¨í™” ì‹œí‚¤ëŠ”ê²Œ í¬ì¸íŠ¸ í•˜ì§€ë§Œ DB ì—ì„œ ê´€ë¦¬í•´ì•¼í•¨.

## [ì‹¬í™”í•™ìŠµ2] ì»¤ìŠ¤í…€ ë§¤ê°œë³€ìˆ˜ ë°ì»¤ë ˆì´í„°
- ë‚´ì¥ ë°ì»¤ë¦¬ì´í„°ëŠ” Express ê°ì²´ì™€ ëŒ€ì‘ë¨
- ê°€ë“œë¥¼ í†µí•œ ì¸ì¦/ì¸ê°€ ê³¼ì •ì—ì„œ ìš”ì²­ê°ì²´ì— ì¶”ê°€ ì •ë³´ë¥¼ ì‹¤ì„ìˆ˜ ìˆìŒ
- ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ ì§ì ‘ ë°›ì„ìˆ˜ ìˆëŠ” @User ì»¤ìŠ¤í…€ ë°ì½”ë ˆì´í„°ë¥¼ ë§Œë“¤ì–´ë³´ì
- createParamDecorator íŒ©í„°ë¦¬ ë°ì»¤ë ˆì´í„°ë¥¼ ì´ìš©í•˜ì—¬ ë§Œë“¬
- ì²«ë²ˆì§¸ ì¸ìˆ˜ dataë¥¼ í™œìš©í•˜ëŠ” ë°©ë²•, @UserData('name') ì²˜ëŸ¼ íŠ¹ì •í•œ ê°’ë§Œ ë°›ê³  ì‹¶ì„ë•Œ
- ValidationPipe ì ìš© > class-validator ì‚¬ìš© > ValidationPipe ì ìš©
  - ? class-validator ë§Œ ì‚¬ìš©í•˜ë©´ ì•ˆë˜ë‚˜?
  - ë³´í†µ ê¸€ë¡œë²Œë¡œ app.useGlobalPipes(new ValidationPipe()) ì´ë ‡ê²Œ ì„ ì–¸í•¨
- applyDecorators ë¡œ ì—¬ëŸ¬ ì¢…ë¥˜ì˜ ë°ì½”ë ˆì´í„° í•¨ì„± ê°€ëŠ¥
  
## [ì‹¬í™”í•™ìŠµ3] ë©”íƒ€ë°ì´í„°(Reflection í´ë˜ìŠ¤)
- ë‹¤ë¥¸ ì»¤ìŠ¤í…€ ë°ì»¤ë ˆì´í„° ì‚¬ìš©ë°©ë²•
- ë©”íƒ€ë°ì´í„°ë¥¼ @SetMetadata ë¡œ ì§€ì •ê°€ëŠ¥
  - SetMetadata: ë©”íƒ€ë°ì´í„°ë¥¼ í‚¤ì™€ ê°’ìœ¼ë¡œ ë°›ì•„ CustomDecorator íƒ€ì…ìœ¼ë¡œ ëŒë ¤ì¤Œ
- Nest ë©”íƒ€ë°ì´í„°ë¥¼ ë‹¤ë£¨ê¸° ìœ„í•œ í—¬í¼ í´ë˜ìŠ¤ë¡œ Reflector í´ë˜ìŠ¤ë¥¼ ì œê³µ
  - Reflector ë¥¼ ì´ìš©í•˜ì—¬ ë©”íƒ€ë°ì´í„°ë¥¼ ì½ìŒ
  - ìš”ì²­í•  ë©”ì„œë“œì—ì„œ ë©”íƒ€ ë°ì´í„°ë¥¼ ì½ì–´ì˜´
  - Reflector ë¥¼ ì‚¬ìš©í•˜ë©´ ì£¼ì…ë°›ì•„ì•¼í•˜ë¯€ë¡œ ì „ì—­ìœ¼ë¡œ ì‚¬ìš©í•  ì—†ê³  ì»¨íŠ¸ë¡¤ëŸ¬ì— ì„ ì–¸í•˜ê±°ë‚˜ ì»¤ìŠ¤í…€ í”„ë¡œë°”ì´ë”ë¡œ ì œê³µ í•´ì•¼í•¨
  - í´ë˜ìŠ¤ì—ë„ ì ìš©ê°€ëŠ¥(ìƒìœ„ ë ˆë²¨)
- Reflector ëŠ” í´ë˜ìŠ¤(context.getClass) + ë©”ì†Œë“œ(context.getHandler) ë¡œ ì‚¬ìš©ê°€ëŠ¥
  







