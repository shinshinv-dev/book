# 1.아파치 스파크 소개: 통합 분석 엔진
## 스파크의 시작
### 빅데이터와 구글에서의 분산 컴퓨팅
- 구글에서 필요해서 만듦
- GFS, MR, BigTable
### 야후!에서의 하둡
- 야후에서 하둡을 만듦
- 아파치로 넘김
- 단점이 많음
### AMP 랩에서의 스파크 초창기
- 위의 단점을 극복하기 위해 스파크 프로젝트를 진행
- 스파크 > MR
## 아파치 스파크란 무엇인가?
- 데이터 센터나 클라우드에서 대규모 분산 데이터 처리를 하기 위해 설계된 통합형 엔진
### 속도
- 모든 중간 결과는 메모리에 유지되며, 디스크  I/O를 제한적으로 사용
### 사용편리성
- 연산의 종류가 트랜스포메이션과 액션 2가지
### 모듈성
- 스칼라, 자바, 파이썬, SQL, R 지원
### 확장성
- 수많은 데이터소스(하둡, 몽고DB, 하이브, RDBMS등) 처리 가능
## 통합된 분석
## 단일화된 스택으로의 아파치 컴포넌트
- 스파크에서 다 할 수 있음
- 어느 스파크로 작성해도 고도로 경량화된 바이트코드로 변환
- 스파크 SQL
- 스파크 ML lib (머신러닝)
- 스파크 정형화 스트리밍
- Graph X
## 아파치 스파크의 분산 실행
- 스파크 드라이버
- SparkSession : 진입점
- 클러스터 매니저
- 스파크 이그제큐터
- 배포모드
  - 로컬, 단독, 얀, 쿠버네티스
- 분산 데이터와 파티션
  - 가급적이면 지역성을 고려함
- 텡스텐?
## 개발자의 경험
- 스칼라는 데이터셋을 사용가능(강타입), 파이썬은 약타입
### 스파크는 누가 사용하고 왜 사용하는가

# 2. 아파치 스파크 다운로드 및 시작
## 1단계: 아파치 스파크 다운로드
## 3단계: 스파크 애플리케이션 개념의 이해
### 스파크 애플리케이션과 SparkSession
### 트랜스포메이션, 액션, 지연평가
- 트랜스포메이션 : 오리지널은 건들지 않음, 새로 생성
- 리니지?
## 스파크 UI


# 3. 아파치 스파크의 정형화 API

## 스파크: RDD의 아래에는 무엇이 있는가
- RDD 특성 : 의존성, 파티션, 연산함수(Partition => Iterator[T])
  - 단점들이 존재해서 고수준 DSL API 로 변경
 
## 스프크의 구조 확립
### 핵심적인 장점과 이득
- 고수준 API를 사용함

## 데이터 프레임 API
- 스파크의 기본 데이터 타입
- 스파크의 정형화 타입과 복합 타입
- 스키마와 데이터 프레임 만들기
- 칼럼과 표현식
- 로우
- 자주 쓰이는 데이터 프레임 작업들

### 스파크의 기본 데이터 프레임

## 데이터세트 API
- 정적 타입 객체, 동적 타입 객체, 포괄적인 Row
### 데이터세트 생성
### 데이터세트에서 가능한 작업들
### 시작부터 끝까지 다룬 데이터세트 예제

## 데이터 프레임 vs 데이터 세트
- 데이터프레임 분석오류 : 실행시점 (단점)
- 데이터세트 분석오류 : 컴파일시점
  
## 스파크 SQL과 하부의 엔진
- 카탈리스트 옵티마이저


# 5. 스파크 SQL과 데이터 프레임: 외부 데이터 소스와 소통하기
- 사용자 정의 합수 사용
- JDBC 및 SQL 데이터베이스등 외부 데이터 원본과 연결
- 단순, 복잡, 고차, 일반을 사용하여 작업

## 스파크 SQL과 아파치 하이브
- 스파크 SQL : 관계형 처리 + 함수형 프로그래밍 API를 통합하는 기본 구성요소

### 사용자 정의 함수 : UDF
- 스파크 SQL UDF
  - SQL UDF 만드는 예 - UDF 를 등록하고 임시뷰를 생성해서 쿼리를 사용할수 있음
- 스파크 SQL에서 평가 순서 및 null 검사
  - 평가 순서를 보장하지 않음
- 판다스 UDF 로 파이스파크 UDF 속도 향상 및 배포
  - 파이스파크 UDF가 JVM 데이터이동때문에 성능이 느려 판다스UDF 도입
### 스파크 SQL 셸, 비라인 및 태블로로 쿼리하기
> 스파크 스리프트 서버(Spark Thrift Server): Apache Spark의 SQL 엔진을 기반으로 한 분산 SQL 처리 서버
- 아파치 스파크를 쿼리하는 다양한 메커니즘
- 스파크 SQL 셸 사용하기
- 비라인 작업 : 하이브QL 쿼리를 실행하기 위한 유틸리티
- 태블로로 작업하기 : BI 도구
### 외부 데이터 소스
- JDBC 및 SQL 데이터 베이스
- 파티셔닝 연결 속성이 존재
- PostgresSQL
- MySQL
- 애저 코스모스 DB
- MS SQL 서버
- 기타 외부 데이터 소스
## 데이터 프레임 및 스파크 SQL 고차 함수
- 방법1 : 분해 및 수집
- 방법2 : 사용자 정의 함수
- 위 방법은 잠재적으로 비용이 많이 드는 기술이고 내장함수를 사용해서 대체
  - 배열 유형 함수 - array_distinct
  - 맵 함수 - map_concat
- 고차 함수 : 익명 람다 함수를 인수로 사용
  - transform()
  - filter()
  - exists()
  - aggregate()
## 일반적인 데이터 프레임 및 스파크 SQL 작업
- Union
- Join
- 윈도우
- 수정 - withColumn, drop, withColumnRenamed

 








